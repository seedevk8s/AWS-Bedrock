<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1100 1000">
  <defs>
    <style>
      .title { font-family: Arial, sans-serif; font-size: 24px; font-weight: bold; fill: #232f3e; }
      .subtitle { font-family: Arial, sans-serif; font-size: 14px; fill: #545b64; }
      .section-title { font-family: Arial, sans-serif; font-size: 16px; fill: #232f3e; font-weight: 600; }
      .label { font-family: Arial, sans-serif; font-size: 13px; fill: #232f3e; font-weight: 600; }
      .small-label { font-family: Arial, sans-serif; font-size: 11px; fill: #545b64; }
      .code { font-family: 'Courier New', monospace; font-size: 11px; fill: #232f3e; }
      .code-white { font-family: 'Courier New', monospace; font-size: 11px; fill: #ffffff; }
      .aws-orange { fill: #ff9900; }
      .aws-blue { fill: #527fff; }
      .aws-green { fill: #1e8900; }
      .box { fill: #ffffff; stroke: #545b64; stroke-width: 2; rx: 8; }
      .highlight-box { fill: #fff5e6; stroke: #ff9900; stroke-width: 3; rx: 8; }
      .code-box { fill: #f5f5f5; stroke: #879596; stroke-width: 1.5; rx: 4; }
      .arrow { fill: none; stroke: #232f3e; stroke-width: 3; marker-end: url(#arrowhead); }
      .arrow-orange { fill: none; stroke: #ff9900; stroke-width: 3; marker-end: url(#arrowhead-orange); }
    </style>
    <marker id="arrowhead" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#232f3e" />
    </marker>
    <marker id="arrowhead-orange" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#ff9900" />
    </marker>
  </defs>

  <!-- Title -->
  <text x="550" y="35" text-anchor="middle" class="title">bedrock.py Core Components</text>
  <text x="550" y="55" text-anchor="middle" class="subtitle">Request Structure &amp; API Invocation</text>

  <!-- Main Flow Container -->
  <rect class="box" x="50" y="80" width="1000" height="880" fill="#f9f9f9" stroke="#232f3e" stroke-width="2"/>

  <!-- Step 1: native_request Structure -->
  <rect class="highlight-box" x="100" y="120" width="900" height="340"/>
  <text x="550" y="150" text-anchor="middle" class="section-title">1. Build native_request Object</text>

  <!-- native_request code block -->
  <rect class="code-box" x="150" y="170" width="800" height="270"/>
  <text x="170" y="195" class="code">native_request = {</text>

  <!-- inputText section -->
  <rect x="190" y="210" width="730" height="70" fill="#e6f2ff" stroke="#527fff" stroke-width="2" rx="5"/>
  <text x="210" y="230" class="code">"inputText": prompt,</text>
  <text x="210" y="250" class="small-label">└─ Prompt: "Describe the purpose of a 'hello world' program in one line."</text>
  <text x="210" y="268" class="small-label" style="fill: #527fff; font-weight: 600;">Input text to send to the model</text>

  <!-- textGenerationConfig section -->
  <rect x="190" y="295" width="730" height="120" fill="#fff5e6" stroke="#ff9900" stroke-width="2" rx="5"/>
  <text x="210" y="315" class="code">"textGenerationConfig": {</text>

  <rect x="230" y="328" width="670" height="35" fill="#ffffff" stroke="#879596" stroke-width="1" rx="3"/>
  <text x="250" y="345" class="code">"maxTokenCount": 512,</text>
  <text x="550" y="345" class="small-label">← Maximum length of generated text</text>

  <rect x="230" y="368" width="670" height="35" fill="#ffffff" stroke="#879596" stroke-width="1" rx="3"/>
  <text x="250" y="385" class="code">"temperature": 0.5,</text>
  <text x="550" y="385" class="small-label">← Creativity level (0.0=deterministic, 1.0=creative)</text>

  <text x="210" y="413" class="code">}</text>
  <text x="170" y="430" class="code">}</text>

  <!-- Arrow to invoke_model -->
  <path class="arrow-orange" d="M 550 460 L 550 500"/>
  <text x="570" y="485" class="small-label" fill="#ff9900" font-weight="600">Convert to JSON</text>

  <!-- Step 2: invoke_model Call -->
  <rect class="highlight-box" x="100" y="500" width="900" height="420"/>
  <text x="550" y="530" text-anchor="middle" class="section-title">2. Invoke AWS Bedrock API</text>

  <!-- invoke_model code block -->
  <rect class="aws-orange" x="150" y="550" width="800" height="160"/>
  <text x="170" y="575" class="code-white" font-size="12px" font-weight="600">response = client.invoke_model(</text>

  <!-- modelId parameter -->
  <rect x="200" y="590" width="730" height="45" fill="#ffffff" stroke="#232f3e" stroke-width="2" rx="5"/>
  <text x="220" y="610" class="code">modelId=model_id,</text>
  <text x="220" y="625" class="small-label">Value: "amazon.titan-text-premier-v1:0"</text>

  <!-- body parameter -->
  <rect x="200" y="645" width="730" height="45" fill="#ffffff" stroke="#232f3e" stroke-width="2" rx="5"/>
  <text x="220" y="665" class="code">body=request</text>
  <text x="220" y="680" class="small-label">JSON-encoded native_request from Step 1</text>

  <text x="170" y="705" class="code-white" font-size="12px" font-weight="600">)</text>

  <!-- AWS Bedrock Service -->
  <rect x="150" y="730" width="800" height="170" fill="#232f3e" stroke="#ff9900" stroke-width="3" rx="8"/>
  <text x="550" y="755" text-anchor="middle" class="label" fill="#ff9900" font-size="16px">AWS Bedrock Runtime Service</text>
  <text x="550" y="775" text-anchor="middle" class="small-label" fill="#ffffff">bedrock-runtime.us-east-1.amazonaws.com</text>

  <!-- Service components -->
  <rect class="aws-blue" x="200" y="795" width="250" height="85"/>
  <text x="325" y="820" text-anchor="middle" class="label" fill="white">Titan Text Premier</text>
  <text x="325" y="838" text-anchor="middle" class="small-label" fill="white">Foundation Model</text>
  <text x="325" y="853" text-anchor="middle" class="code-white">Process inputText</text>
  <text x="325" y="868" text-anchor="middle" class="code-white">Apply config params</text>

  <rect class="aws-green" x="480" y="795" width="250" height="85"/>
  <text x="605" y="820" text-anchor="middle" class="label" fill="white">Response Generation</text>
  <text x="605" y="838" text-anchor="middle" class="small-label" fill="white">JSON Format</text>
  <text x="605" y="853" text-anchor="middle" class="code-white">results[0]["outputText"]</text>
  <text x="605" y="868" text-anchor="middle" class="code-white">Return generated text</text>

  <!-- Legend -->
  <rect x="80" y="930" width="940" height="20" fill="none" stroke="none"/>
  <rect x="100" y="930" width="20" height="15" fill="#e6f2ff" stroke="#527fff" stroke-width="1"/>
  <text x="125" y="941" class="small-label">Input Text</text>

  <rect x="250" y="930" width="20" height="15" fill="#fff5e6" stroke="#ff9900" stroke-width="1"/>
  <text x="275" y="941" class="small-label">Configuration</text>

  <rect x="400" y="930" width="20" height="15" fill="#ff9900"/>
  <text x="425" y="941" class="small-label">API Call</text>

  <rect x="550" y="930" width="20" height="15" fill="#527fff"/>
  <text x="575" y="941" class="small-label">Model Processing</text>

  <rect x="720" y="930" width="20" height="15" fill="#1e8900"/>
  <text x="745" y="941" class="small-label">Response</text>
</svg>
